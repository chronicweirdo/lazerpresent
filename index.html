<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="flaviu cacoveanu lives & works">

    <title>friendsforever</title>

    <style>
    body {
        font-size: 0.8em;
        margin: 0;
        padding: 0;
        border: 0;
        color: #fff;
        background-color: #222;
        font-family: Helvetica, Arial, sans-serif;
        overflow: hidden;
    }

    h1, p {
        line-height: 1.3em;
        margin: 0 auto 15px auto;
        max-width: 1000px;
    }
    h1 {
        font-size:1em;
        text-transform: uppercase;
        margin-bottom: 2em;
        font-weight: normal;
    }
    a {
        color: white;
        text-decoration: none;
    }
    a:hover {
        color: pink;
    }
    #copyright {
        bottom: 0px;
        width: 100%;
        position: fixed;
    }
    #miniVideos {
        margin: auto;
        display: grid;
        column-gap: 1vw;
        row-gap: 1vw;
        grid-template-columns: repeat(3, 30vw);
        max-width: 93vw;
    }
    #miniVideos video {
        width: 30vw;
    }
    </style>
    <script>
        var videos = [
            "video/ants_horizontal_trim.mp4", 
            "video/bird_horizontal.mp4",
            "video/bubble 2_horizontal.mp4",
            "video/dog balloon_horizontal_crop.mp4",
            "video/early morning_horizontal_trim.mp4",
            "video/intercontinental_horizontal.mp4",
            "video/motorbike mirror sun_horizontal_trim.mp4",
            "video/newspaper berlin_horizontal_trim.mp4",
            "video/newspaper handrail_horizontal.mp4",
            "video/receipt_horizontal.mp4",
            "video/sun_horizontal_trim.mp4",
            "video/white waves_horizontal_trim.mp4"
        ]
        function randomVideoLink() {
            return videos[Math.floor(Math.random() * videos.length)]
        }
        function sameVideo(v1, v2) {
            let v1d = decodeURI(v1)
            let v2d = decodeURI(v2)
            let s = Math.min(v1d.length, v2d.length)
            let v1ds = v1d.substring(v1d.length - s)
            let v2ds = v2d.substring(v2d.length - s)
            return v1ds == v2ds
        }
        function selectAndPlayVideo() {
            let v = getVideoElement()
            let currentVideo = v.src
            var videoLink = randomVideoLink()
            while (currentVideo.length > 0 && videos.length > 1 && sameVideo(videoLink, currentVideo)) {
                videoLink = randomVideoLink()
            }
            v.src = videoLink
            v.play()
        }
        function getViewportWidth() {
            const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0)
            return vw
        }
        function getViewportHeight() {
            const vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0)
            return vh
        }
        function centerVideo() {
            let v = getVideoElement()
            let width = v.videoWidth
            let height = v.videoHeight
            let videoIsPortrait = height > width
            let vw = getViewportWidth()
            let vh = getViewportHeight()
            let screenIsPortrait = vh > vw

            let zoom = Math.max(vw / width, vh / height)
            let ratio = width / height
            let top = (vh - zoom * height) / 2
            let left = (vw - zoom * width) / 2

            v.style.top = top + "px"
            v.style.left = left + "px"
        }
        function getVideoElement() {
            //let v = document.getElementsByTagName("video")[0]
            let v = document.getElementById("backgroundVideo")
            return v
        }
        function createVideoElement() {
            let v = document.createElement("video")
            //v.src = "bo2.webm"
            v.type = "video/webm"
            v.autoplay = true
            v.muted = true
            v.playsInline = true
            v.style.position = "fixed"
            v.style.minWidth = "100%"
            v.style.minHeight = "100%"
            v.style.zIndex = "-1"
            v.style.top = "0"
            v.style.left = "0"
            v.onended = () => {
                selectAndPlayVideo()
            }
            v.addEventListener('loadeddata', (e) => {
                if(v.readyState >= 2){
                    centerVideo()
                }
            });
            return v
        }
        function addVideoListeners() {
            let v = getVideoElement()
            v.onended = () => {
                selectAndPlayVideo()
            }
            v.addEventListener('loadeddata', (e) => {
                if(v.readyState >= 2){
                    centerVideo()
                }
            });
        }
        
        //<div style="padding:56.25% 0 0 0;position:relative;"><iframe src="https://player.vimeo.com/video/673244979?h=ca0c1fcd05&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen style="position:absolute;top:0;left:0;width:100%;height:100%;" title="sun_horizontal_trim"></iframe></div><script src="https://player.vimeo.com/api/player.js">
        
        function getVimeoIframe(videoId) {
            let videoLink = "https://player.vimeo.com/video/" + videoId + "?h=ca0c1fcd05&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479"
            let iframe = document.createElement("iframe")
            iframe.src = videoLink
            iframe.frameBorder = 0
            //iframe.allow = "autoplay; fullscreen; picture-in-picture"
            iframe.allow = "fullscreen"
            iframe.allowFullscreen = true
            //iframe.style = "position:absolute;top:0;left:0;width:100%;height:100%;"
            return iframe
        }
        function addVideos() {
            let videoIds = ["673244979", "673245034"]
            let linkedVideos = document.getElementById("linkedVideos")
            for (let i = 0; i < videoIds.length; i++) {
                linkedVideos.appendChild(getVimeoIframe(videoIds[i]))
            }
        }
        window.onload = function() {
            //let v = createVideoElement()
            //document.body.appendChild(v)
            addVideoListeners()
            selectAndPlayVideo()
            //addVideos()
        }
        window.onresize = function() {
            centerVideo()
        }
    </script>
    <script src="https://player.vimeo.com/api/player.js"></script>
</head>

<body>
<h1>LAZERPRESENT</h1>
<div id="miniVideos">
    <video autoplay muted playsinline loop src="video/ants_horizontal_trim.mp4"></video>
    <video autoplay muted playsinline loop src="video/bird_horizontal.mp4"></video>
    <video autoplay muted playsinline loop src="video/bubble 2_horizontal.mp4"></video>
    <!--video autoplay muted playsinline loop src="video/dog balloon_horizontal_crop.mp4"></video>
    <video autoplay muted playsinline loop src="video/early morning_horizontal_trim.mp4"></video>
    <video autoplay muted playsinline loop src="video/intercontinental_horizontal.mp4"></video>
    <video autoplay muted playsinline loop src="video/motorbike mirror sun_horizontal_trim.mp4"></video>
    <video autoplay muted playsinline loop src="video/newspaper berlin_horizontal_trim.mp4"></video>
    <video autoplay muted playsinline loop src="video/newspaper handrail_horizontal.mp4"></video>
    <video autoplay muted playsinline loop src="video/receipt_horizontal.mp4"></video>
    <video autoplay muted playsinline loop src="video/sun_horizontal_trim.mp4"></video>
    <video autoplay muted playsinline loop src="video/white waves_horizontal_trim.mp4"></video-->
</div>
<video id="backgroundVideo" autoplay muted playsinline style="position: fixed; min-width: 100%; min-height: 100%; z-index: -1; top: 0px; left: 0px;" src=""></video>
</body>
</html>
